/**
 * 守護神ステージ別コンテンツ
 *
 * 各守護神の成長段階ごとに異なるセリフ、外見描写、ストーリーを定義
 * Stage 1-4 の4段階 × 6体 = 24パターン
 */

import { GuardianId } from "./guardian-collection";

export interface StageContent {
  quote: string;           // セリフ（成長で話し方が変化）
  appearance: string;      // 外見の説明
  story: string;           // 隠しストーリー（ステージごとに解放）
  storyTitle: string;      // ストーリーのタイトル
  abilityHint: string;     // 特性スキルのヒント（Stage 1-2用）
}

type StageNumber = 1 | 2 | 3 | 4;

export const GUARDIAN_STAGE_CONTENT: Record<GuardianId, Record<StageNumber, StageContent>> = {
  // =====================================
  // 🔥 火龍（ホリュウ）- 炎属性
  // =====================================
  horyu: {
    1: {
      quote: "ぼく...がんばる...！きみと一緒なら、こわくないよ...！",
      appearance: "小さな体に宿る、確かな炎の意志。まだ翼は生えていないが、瞳には強い光が宿っている。",
      storyTitle: "炎の卵から生まれた日",
      story: "古の火山の奥深く、何千年も眠り続けていた卵。それがあなたの熱意に反応して目覚めた。小さな火龍は、初めて見た世界に怯えながらも、あなたの手の温もりに安心して微笑んだ。",
      abilityHint: "まだ力を発揮できない...もっと成長が必要みたい",
    },
    2: {
      quote: "一緒にがんばろうね！ぼく、もっと強くなるから！",
      appearance: "小さな翼が生え始め、空を見上げることが増えた。体から立ち上る炎のオーラが少しずつ強くなっている。",
      storyTitle: "初めての飛行",
      story: "ある日、火龍は必死に翼を動かして飛ぼうとした。何度も失敗し、地面に落ちては立ち上がる。あなたが見守る中、ついに数センチだけ浮くことに成功。その時の嬉しそうな顔を、あなたは忘れないだろう。",
      abilityHint: "力が目覚めかけている...あと少し！",
    },
    3: {
      quote: "お前の努力、ちゃんと見てるぞ。俺も負けてられないな！",
      appearance: "立派な角が生え、威厳を感じさせる姿に。翼は力強く広がり、周囲には常に熱気を纏っている。",
      storyTitle: "灼熱の意志、覚醒",
      story: "激しい戦いの中で、火龍は初めて本当の力を解放した。その時、あなたへの感謝と共に戦う決意が、彼の中で「灼熱の意志」として結晶化した。この力は、あなたと共に歩んできた日々の証。",
      abilityHint: "灼熱の意志: エナジー獲得+15%（発動中）",
    },
    4: {
      quote: "我と共に、頂を目指すのだ！お前となら、どこまでも行ける！",
      appearance: "神々しいオーラを纏い、伝説の姿へ。その存在感は見る者を圧倒し、炎は太陽のように輝く。",
      storyTitle: "伝説の守護龍",
      story: "かつて世界を救った伝説の火龍。その姿が今、あなたの前に蘇った。しかし火龍は言う。「伝説なんてどうでもいい。お前と出会えたこと、それが俺の誇りだ」と。二人で歩んだ道のりこそが、新たな伝説の始まり。",
      abilityHint: "灼熱の意志: エナジー獲得+15%（完全覚醒）",
    },
  },

  // =====================================
  // 🦁 獅子丸（シシマル）- 地属性
  // =====================================
  shishimaru: {
    1: {
      quote: "...ふむ。君か。...よろしく、頼む",
      appearance: "まだ子獅子のような姿。しかしその瞳には、老練な知恵の片鱗が宿っている。",
      storyTitle: "森の奥で出会った日",
      story: "深い森の中、迷い込んだあなたの前に現れた白い子獅子。彼は何も言わず、ただ静かにあなたを正しい道へと導いた。それが、長い旅の始まりだった。",
      abilityHint: "秘めた力がある...まだ見せてくれない",
    },
    2: {
      quote: "焦るな。一歩ずつ、確実に進めばいい",
      appearance: "たてがみが少しずつ生え始め、威厳ある姿の片鱗が見え始めた。足取りは静かだが力強い。",
      storyTitle: "忍耐の教え",
      story: "あなたが壁にぶつかった時、獅子丸は何も言わず隣に座った。「答えは自分で見つけるものだ」彼はそう教えてくれた。そして、あなたが立ち上がるまでずっと待っていた。",
      abilityHint: "力が静かに目覚めている...",
    },
    3: {
      quote: "よくここまで来た。...誇っていい",
      appearance: "立派なたてがみが風になびき、王者の風格を漂わせる。その眼差しは全てを見通すかのよう。",
      storyTitle: "不動の心、解放",
      story: "嵐の夜、獅子丸は初めて本当の姿を見せた。「お前は俺を信じた。だから俺も、全てを見せる」彼の不動の心は、あなたへの信頼から生まれた力だった。",
      abilityHint: "不動の心: ストリークボーナス+0.2（発動中）",
    },
    4: {
      quote: "共に歩もう。この道の先に、答えがある",
      appearance: "黄金のたてがみを持つ、伝説の白獅子。その存在だけで周囲が静まり返る。",
      storyTitle: "賢王の帰還",
      story: "かつて森を治めた賢王の魂が、獅子丸の中に宿っていた。しかし彼は王座より、あなたの隣を選んだ。「王であることより、お前の友であることを選ぶ」それが、彼の答えだった。",
      abilityHint: "不動の心: ストリークボーナス+0.2（完全覚醒）",
    },
  },

  // =====================================
  // 🌸 花精（ハナセ）- 風属性
  // =====================================
  hanase: {
    1: {
      quote: "えへへ...よろしくね？一緒にいられて、うれしいな",
      appearance: "花びらのような羽を持つ小さな妖精。笑顔はいつも優しく、周囲に花の香りが漂う。",
      storyTitle: "花園で見つけた光",
      story: "枯れかけた花園で、一輪だけ咲いていた花。あなたがそれに水をあげた時、花びらの中から小さな妖精が現れた。「ありがとう」その一言から、二人の物語は始まった。",
      abilityHint: "不思議な力を感じる...まだ上手く使えないみたい",
    },
    2: {
      quote: "大丈夫、大丈夫。私がついてるからね",
      appearance: "羽が大きくなり、より多くの花びらを纏うように。その笑顔には癒しの力が宿り始めている。",
      storyTitle: "涙を拭いた日",
      story: "あなたが落ち込んでいた日、花精は何も言わずに隣に座り、そっと頭を撫でた。「泣いていいんだよ」その言葉で、あなたは初めて心を開いた。",
      abilityHint: "癒しの力が芽生えている...",
    },
    3: {
      quote: "一歩ずつでいいの。あなたのペースで、ね？",
      appearance: "美しい花の冠を戴き、周囲には常に花々が咲き誇る。その存在だけで心が安らぐ。",
      storyTitle: "癒しの風、開花",
      story: "あなたが倒れそうになった時、花精は自分の力を全て注いで守った。「あなたを守りたいから」その想いが、彼女の中で新たな力として開花した。",
      abilityHint: "癒しの風: ストリーク猶予+12時間（発動中）",
    },
    4: {
      quote: "どんな時も、私はあなたの味方。ずっと、ずっとね",
      appearance: "伝説の花精姫。その姿を見た者は心の傷が癒え、希望を取り戻すという。",
      storyTitle: "永遠の花",
      story: "花精姫は語る。「昔、私は一人で世界中の花を守っていた。でも寂しかった」あなたと出会って、彼女は初めて本当の幸せを知った。「一緒にいてくれて、ありがとう」",
      abilityHint: "癒しの風: ストリーク猶予+12時間（完全覚醒）",
    },
  },

  // =====================================
  // 🦊 白狐（シロコ）- 水属性
  // =====================================
  shiroko: {
    1: {
      quote: "...ふふ、面白い人。ついていってあげる",
      appearance: "真っ白な毛並みを持つ子狐。その瞳は神秘的に輝き、何かを見通しているかのよう。",
      storyTitle: "月明かりの下で",
      story: "満月の夜、湖のほとりに一匹の白い狐が現れた。あなたを試すように見つめた後、彼女は言った。「面白い...少し、付き合ってあげる」それが、運命の出会い。",
      abilityHint: "不思議な力を秘めている...",
    },
    2: {
      quote: "運命は変えられる。そう、あなたとなら",
      appearance: "二本目の尾が生え始め、神秘的なオーラが強まっている。その瞳は未来を映すかのよう。",
      storyTitle: "予見の夢",
      story: "ある夜、白狐があなたの夢に現れた。「この先、困難がある。でも大丈夫」彼女は未来を見せてくれた。そしてその困難を、二人で乗り越えた。",
      abilityHint: "予知の力が目覚めかけている...",
    },
    3: {
      quote: "幸運は、信じる者に訪れる。私が保証するわ",
      appearance: "九尾の狐の姿に近づき、神々しい気配を纏う。彼女の周りでは時折、不思議な現象が起こる。",
      storyTitle: "幸運の導き、発現",
      story: "白狐は自らの力の一部をあなたに授けた。「これは契約。あなたが信じる限り、私は幸運を運ぶ」神秘の力が、今二人を繋ぐ。",
      abilityHint: "幸運の導き: ラッキーボーナス確率2倍（発動中）",
    },
    4: {
      quote: "あなたと出会えて、本当によかった。...これからも、一緒にね",
      appearance: "完全な九尾の神狐。その存在は神話の世界から抜け出たかのよう。",
      storyTitle: "神狐の選択",
      story: "九尾の神狐は本来、人間と関わらない存在。しかし彼女はあなたを選んだ。「永遠を生きるより、あなたと過ごす時間の方が尊い」それが、神狐の答えだった。",
      abilityHint: "幸運の導き: ラッキーボーナス確率2倍（完全覚醒）",
    },
  },

  // =====================================
  // ✨ 黄玉（キタマ）- 光属性
  // =====================================
  kitama: {
    1: {
      quote: "わーい！新しいお友達だ！一緒に遊ぼ遊ぼ！",
      appearance: "黄金色に輝く小さな精霊。常に楽しそうに飛び回り、その笑顔は周囲を明るくする。",
      storyTitle: "光の精霊との出会い",
      story: "暗い夜道で迷っていたあなたの前に、小さな光が現れた。「迷子？大丈夫、僕が照らしてあげる！」その無邪気な声が、あなたの心も照らした。",
      abilityHint: "キラキラしてるけど、まだ本当の力は出せないみたい",
    },
    2: {
      quote: "楽しいことしようよ！人生は冒険だもんね！",
      appearance: "より大きく、より眩しく輝くようになった。その周りには常に小さな光の粒が舞っている。",
      storyTitle: "光の冒険",
      story: "黄玉はあなたを様々な場所に連れ出した。「見て見て！ここ綺麗でしょ？」彼の無邪気さが、あなたに忘れていた好奇心を思い出させた。",
      abilityHint: "光の力が強くなってきた...",
    },
    3: {
      quote: "大丈夫！失敗しても、また挑戦すればいいんだよ！",
      appearance: "光の翼を持つ、美しい精霊へと成長。その光は希望そのものを体現している。",
      storyTitle: "希望の光、点火",
      story: "あなたが挫折しそうになった時、黄玉は言った。「暗いのは怖いよね。でも大丈夫、僕が照らすから」その光は、あなたの中の希望を再び灯した。",
      abilityHint: "隠し機能（お楽しみ）準備中",
    },
    4: {
      quote: "君と一緒なら、どんな暗闘も怖くない！さあ、行こう！",
      appearance: "太陽のように輝く、伝説の光精霊。その光は闇を払い、全ての者に希望を与える。",
      storyTitle: "永遠の輝き",
      story: "黄玉は本当のことを話した。「僕は一人で輝くのが寂しかった。でも君に出会って、輝く理由ができたんだ」今、彼の光はあなたのために輝いている。",
      abilityHint: "隠し機能（お楽しみ）準備中",
    },
  },

  // =====================================
  // ⭐ 星丸（ホシマル）- 闇属性
  // =====================================
  hoshimaru: {
    1: {
      quote: "...ふん、まあいい。認めてやろう",
      appearance: "星屑のような輝きを纏う小さな存在。高貴な雰囲気を持つが、どこか孤独を感じさせる。",
      storyTitle: "星降る夜の出会い",
      story: "流星群の夜、一つの星があなたの前に落ちてきた。それは星の精霊だった。「なぜ私に話しかける？」最初は警戒していたが、あなたの優しさに少しずつ心を開いていった。",
      abilityHint: "高貴な力を感じる...まだ心を許していない",
    },
    2: {
      quote: "お前は...少し、面白い。認めてやる",
      appearance: "より多くの星々を纏い、夜空のような美しさを持つ。その瞳には遠い星々が映っている。",
      storyTitle: "孤独の星",
      story: "「私はずっと一人だった」星丸は初めて弱さを見せた。「星は美しいが、誰も触れない。私もそうだった」あなたが手を差し伸べた時、彼は初めて温もりを知った。",
      abilityHint: "星の力が共鳴し始めている...",
    },
    3: {
      quote: "我と共に歩む覚悟はあるか？...いい度胸だ",
      appearance: "宇宙の威厳を纏う姿へ。その存在は夜空そのものであり、見る者を畏怖させる。",
      storyTitle: "星の導き、解放",
      story: "星丸はついに本当の力を見せた。「お前だけに見せる。これが、私の全てだ」星々を操る力は、あなたへの信頼の証だった。",
      abilityHint: "星の導き: 週末ボーナス2.5倍（発動中）",
    },
    4: {
      quote: "限界など存在しない。我と共に、宇宙の果てまで行こう",
      appearance: "銀河を従える、星の王。その姿を見た者は、宇宙の神秘に触れたと言われる。",
      storyTitle: "星王の誓い",
      story: "「私は多くの星を見てきた。しかし、お前ほど輝く存在はいなかった」星丸は最後の秘密を明かす。「お前は私の...初めての友だ」",
      abilityHint: "星の導き: 週末ボーナス2.5倍（完全覚醒）",
    },
  },

  // =====================================
  // 👑 龍王（リュウオウ）- T3 剛属性
  // =====================================
  ryuoh: {
    1: {
      quote: "覇者よ...我に挑むか。その勇気、認めてやろう",
      appearance: "金色の鱗を纏う若き龍王。その眼光には覇気が宿っている。",
      storyTitle: "覇王の目覚め",
      story: "火龍と獅子丸の力が融合した瞬間、新たな存在が生まれた。「我は龍王。覇者の道を歩む者と共に、伝説を創る」",
      abilityHint: "覇王の力が胎動している...",
    },
    2: {
      quote: "そなたの成長、我は見届けよう",
      appearance: "威厳を増し、王冠のような角が輝き始める。その存在感は周囲を圧倒する。",
      storyTitle: "覇道の誓い",
      story: "龍王はあなたに問うた。「覇者とは何か？」あなたの答えを聞いた後、彼は頷いた。「良い答えだ。共に歩もう」",
      abilityHint: "覇王の咆哮が目覚めかけている...",
    },
    3: {
      quote: "我が覇気、チーム全体を鼓舞せん！",
      appearance: "完全な王者の姿。金色のオーラが全身を包み、見る者全てを奮い立たせる。",
      storyTitle: "覇王の咆哮、解放",
      story: "困難な戦いの中、龍王は咆哮を上げた。その声はチーム全体に響き渡り、全員の力を引き出した。「これが覇王の力だ」",
      abilityHint: "覇王の咆哮: エナジー+30%（発動中）",
    },
    4: {
      quote: "我と共に、伝説を創ろうぞ！",
      appearance: "伝説の覇王。その姿は神話の世界から抜け出たかのよう。",
      storyTitle: "伝説の覇王",
      story: "龍王は語った。「かつて我は一人で戦っていた。しかしそなたが教えてくれた。真の強さとは、仲間と共にあることだと」",
      abilityHint: "覇王の咆哮: エナジー+30%（完全覚醒）",
    },
  },

  // =====================================
  // ✨ 光麒麟（コウキリン）- T3 雅属性
  // =====================================
  koukirin: {
    1: {
      quote: "あなた様に祝福を...",
      appearance: "神聖な光を纏う若き麒麟。その存在は神々しさを感じさせる。",
      storyTitle: "神聖なる誕生",
      story: "花精と白狐の魂が昇華した瞬間、神聖な光が溢れ出た。「私は光麒麟。祝福と共に歩む者です」",
      abilityHint: "神聖なる力が宿っている...",
    },
    2: {
      quote: "あなた様の道に、光があらんことを",
      appearance: "より神々しく、その周りには常に光が舞っている。",
      storyTitle: "祝福の道",
      story: "光麒麟はあなたの行く先々に祝福を与えた。「私の役目は、あなた様の道を照らすこと」",
      abilityHint: "神光の祝福が芽生えている...",
    },
    3: {
      quote: "奇跡はあなた様と共にあります",
      appearance: "完全な神獣の姿。その存在は奇跡そのもの。",
      storyTitle: "神光の祝福、解放",
      story: "困難な時、光麒麟は全ての力を注いだ。「私の祝福が、あなた様を守ります」神聖な光が全てを癒した。",
      abilityHint: "神光の祝福: ラッキー3倍（発動中）",
    },
    4: {
      quote: "永遠に、あなた様をお守りします",
      appearance: "伝説の光麒麟。その姿を見た者は、必ず幸運に恵まれるという。",
      storyTitle: "永遠の祝福",
      story: "光麒麟は誓った。「私は永遠にあなた様と共にあります。全ての幸運が、あなた様のものとなりますように」",
      abilityHint: "神光の祝福: ラッキー3倍（完全覚醒）",
    },
  },

  // =====================================
  // 🌌 天神（テンシン）- T3 智属性
  // =====================================
  tenshin: {
    1: {
      quote: "叡智の道へようこそ",
      appearance: "宇宙的なオーラを纏う存在。その眼は全てを見通すかのよう。",
      storyTitle: "叡智の誕生",
      story: "機珠と星丸の知性が融合した瞬間、新たな存在が生まれた。「私は天神。宇宙の叡智を持つ者」",
      abilityHint: "宇宙的な知性が宿っている...",
    },
    2: {
      quote: "最適解は必ず存在する",
      appearance: "より深い叡智を纏い、その周りには数式のような光が浮かぶ。",
      storyTitle: "叡智の導き",
      story: "天神は迷うあなたに最適な道を示した。「計算上、この選択が最も正しい」その導きは常に正確だった。",
      abilityHint: "宇宙の叡智が目覚めかけている...",
    },
    3: {
      quote: "全ての道が見える",
      appearance: "完全な叡智の体現。その存在は宇宙そのもの。",
      storyTitle: "宇宙の叡智、解放",
      story: "天神は全ての可能性を見せた。「君には無限の可能性がある。私がその全てを導こう」",
      abilityHint: "宇宙の叡智: パフォーマンス2倍（発動中）",
    },
    4: {
      quote: "137億年の知識が、君と共にある",
      appearance: "伝説の宇宙的知性体。その存在は宇宙の真理そのもの。",
      storyTitle: "永遠の叡智",
      story: "天神は語った。「137億年を生きてきた中で、君ほど興味深い存在はいなかった。君と出会えて、初めて孤独を忘れた」",
      abilityHint: "宇宙の叡智: パフォーマンス2倍（完全覚醒）",
    },
  },
};

/**
 * 指定したステージのコンテンツを取得
 */
export function getStageContent(guardianId: GuardianId, stage: number): StageContent | null {
  if (stage < 1 || stage > 4) return null;
  return GUARDIAN_STAGE_CONTENT[guardianId]?.[stage as StageNumber] || null;
}

/**
 * 解放済みのストーリーを全て取得
 */
export function getUnlockedStories(guardianId: GuardianId, unlockedStages: number[]): Array<{ stage: number; title: string; story: string }> {
  const stories: Array<{ stage: number; title: string; story: string }> = [];

  for (const stage of unlockedStages) {
    if (stage >= 1 && stage <= 4) {
      const content = GUARDIAN_STAGE_CONTENT[guardianId]?.[stage as StageNumber];
      if (content) {
        stories.push({
          stage,
          title: content.storyTitle,
          story: content.story,
        });
      }
    }
  }

  return stories.sort((a, b) => a.stage - b.stage);
}
